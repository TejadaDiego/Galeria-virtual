<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Cuenta - Galer칤a Virtual</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Estilos -->
  <link rel="stylesheet" href="Estilos/perfil.css">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4">
    <a class="navbar-brand" href="inicio.html">Galer칤a Virtual</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">

        <ul class="navbar-nav me-auto">
            <li class="nav-item"><a class="nav-link" href="inicio.html">Inicio</a></li>
            <li class="nav-item"><a class="nav-link" href="nosotros.html">Nosotros</a></li>
            <li class="nav-item"><a class="nav-link" href="contenido.html">Contenido</a></li>
            <li class="nav-item"><a class="nav-link" href="publicar.html">Publicar</a></li>
        </ul>

        <!-- MEN칔 CUENTA -->
        <ul class="navbar-nav ms-auto">
            <li class="nav-item dropdown" id="menuCuenta" style="display:none;">
                <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">

                    <img id="navFotoPerfil" src="" alt="Foto" 
                        style="width:35px; height:35px; border-radius:50%; object-fit:cover; margin-right:8px;">

                    <span id="navNombreUsuario"></span>
                </a>

                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="cuenta.html">Mi Cuenta</a></li>
                    <li><a class="dropdown-item" href="#foto">Cambiar foto</a></li>
                    <li><a class="dropdown-item" href="#datos">Editar datos</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-danger" href="#" id="cerrarSesionBtn">Cerrar sesi칩n</a></li>
                </ul>
            </li>
        </ul>
    </div>
</nav>

<!-- ENCABEZADO DE PERFIL -->
<header class="perfil-header p-3 d-flex align-items-center">
    <img id="fotoPeque침a" class="perfil-foto-mini" alt="Foto del usuario">
    <div class="ms-2">
      <h3 id="nombrePeque침o"></h3>
      <p id="tipoPeque침o" class="m-0"></p>
    </div>
</header>

<!-- CONTENIDO PRINCIPAL -->
<main class="perfil-container">
    <div class="perfil-card">

      <img id="fotoUsuario" class="perfil-foto" alt="Foto del usuario">

      <label for="nuevaFoto" class="editar-foto" id="foto">游닝 Cambiar foto</label>
      <input type="file" id="nuevaFoto" accept="image/*">

      <h2><input type="text" id="nombreUsuario" placeholder="Nombre del usuario"></h2>

      <p><strong>Correo:</strong> <input type="email" id="correoUsuario"></p>

      <p><strong>Tipo de cuenta:</strong> 
        <span id="tipoUsuario"></span>
      </p>

      <button id="guardarCambios">游 Guardar cambios</button>
      <button id="cerrarSesion" class="cerrar">游 Cerrar sesi칩n</button>

    </div>
</main>

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Script Perfil -->
<script src="Scripts/perfil.js"></script>

<!-- SCRIPT PARA MOSTRAR FOTO Y NOMBRE EN EL NAVBAR -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    const usuario = JSON.parse(localStorage.getItem("usuarioActivo"));

    if (usuario) {
        // Mostrar men칰 cuenta
        document.getElementById("menuCuenta").style.display = "block";

        // Foto y nombre
        document.getElementById("navNombreUsuario").textContent = usuario.nombre;
        const fotoPerfil = usuario.foto ? usuario.foto : "img/default-user.png";
        document.getElementById("navFotoPerfil").src = fotoPerfil;

        // Bot칩n cerrar sesi칩n
        document.getElementById("cerrarSesionBtn").addEventListener("click", () => {
            localStorage.removeItem("usuarioActivo");
            window.location.href = "login.html";
        });
    }
});
</script>

</body>
</html>
