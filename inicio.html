<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="Estilos/styleC.css" />
  <title>Carrusel de Proyectos</title>
</head>

<body>

  <!-- ⭐ NAVBAR CON SESIÓN DINÁMICA ⭐ -->
  <nav class="navbar">
    <ul>
      <li><a href="inicio.html">Inicio</a></li>
      <li><a href="Sobre_nosotros.html">Nosotros</a></li>
      <li><a href="Contenido.html">Contenido</a></li>
      <li><a href="publicar.html">Publicar +</a></li>

      <!-- Botón dinámico -->
      <li><a id="btnLogin" href="login.html">Iniciar sesión</a></li>

      <!-- Mini perfil -->
      <li id="miniPerfil" style="display:none;">
        <a href="perfil.html">
          <img id="miniFoto" style="width:32px; height:32px; border-radius:50%; vertical-align:middle;">
          <span id="miniNombre" style="margin-left:6px;"></span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Información del usuario -->
  <div id="infoUsuario" style="
      color:white;
      text-align:center;
      margin-top:15px;
      font-size:18px;
      display:none;
  ">
    Bienvenido: <span id="nombreUsuario"></span>
  </div>


  <!-- CARRUSEL ORIGINAL -->
  <div class="carrusel">
    <div class="atras">
      <img id="atras" src="img/atras.svg" alt="Atrás" loading="lazy" />
    </div>

    <div class="imagenes">
      <div id="img"></div>
      <div id="texto" class="texto"></div>
    </div>

    <div class="adelante" id="adelante">
      <img src="img/adelante.svg" alt="Adelante" loading="lazy" />
    </div>
  </div>

  <div class="puntos" id="puntos"></div>

  <!-- ⭐ SCRIPT DE SESIÓN GLOBAL ⭐ -->
  <script>
    function cargarUsuarioEnUI() {
      const user = JSON.parse(localStorage.getItem("usuarioActivo"));

      const btnLogin = document.getElementById("btnLogin");
      const info = document.getElementById("infoUsuario");
      const miniPerfil = document.getElementById("miniPerfil");
      const miniFoto = document.getElementById("miniFoto");
      const miniNombre = document.getElementById("miniNombre");
      const nombreUsuario = document.getElementById("nombreUsuario");

      if (user) {
        // Ocultar botón login
        btnLogin.style.display = "none";

        // Mostrar info en el centro
        info.style.display = "block";
        nombreUsuario.textContent = user.nombre;

        // Mini perfil visible
        miniPerfil.style.display = "inline-block";
        miniFoto.src = user.foto;
        miniNombre.textContent = user.nombre;
      } else {
        // No hay sesión
        btnLogin.style.display = "inline";
        info.style.display = "none";
        miniPerfil.style.display = "none";
      }
    }

    // Cargar al entrar
    cargarUsuarioEnUI();

    // Escuchar cambios desde otras páginas (perfil.js)
    window.addEventListener("storage", (e) => {
      if (e.key === "usuarioActivo") {
        cargarUsuarioEnUI();
      }
    });

    window.addEventListener("actualizarUsuarioUI", cargarUsuarioEnUI);
  </script>

  <!-- Scripts del carrusel -->
  <script src="Scripts/sesion-global.js"></script>
  <script src="Scripts/app.js"></script>

</body>
</html>
