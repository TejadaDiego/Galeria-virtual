<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inicio - Galería Virtual</title>

  <!-- Estilos generales -->
  <link rel="stylesheet" href="Estilos/styleC.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>

  <!-- ================= NAVBAR ================= -->
  <nav class="navbar">
    <div class="navbar-logo">Galería <span style="color:#b34cff">Virtual</span></div>

    <div class="navbar-links">
      <a href="inicio.html" class="active">Inicio</a>
      <a href="Sobre_nosotros.html">Nosotros</a>
      <a href="Contenido.html">Contenido</a>
      <a href="publicar.html">Publicar +</a>

      <!-- BOTÓN LOGIN SI NO HAY USUARIO -->
      <a id="btnLogin" class="btn-login" href="login.html">Iniciar sesión</a>

      <!-- FOTO + NOMBRE DEL USUARIO -->
      <div id="navbarUserBox" class="usuario-box"></div>
    </div>
  </nav>

  <!-- ================= CARRUSEL ================= -->
  <div class="carrusel">
    <div class="atras">
      <img id="atras" src="img/atras.svg" alt="Atrás" loading="lazy" />
    </div>

    <div class="imagenes">
      <div id="img"></div>
      <div id="texto" class="texto"></div>
    </div>

    <div class="adelante" id="adelante">
      <img src="img/adelante.svg" alt="Adelante" loading="lazy" />
    </div>
  </div>

  <div class="puntos" id="puntos"></div>

  <!-- ================= SCRIPT NAVBAR ================= -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Aceptar tanto usuarioActivo como usuario
      let usuario = JSON.parse(localStorage.getItem("usuarioActivo"));

      if (!usuario) {
        usuario = JSON.parse(localStorage.getItem("usuario"));
      }

      const userBox = document.getElementById("navbarUserBox");
      const btnLogin = document.getElementById("btnLogin");

      // Si no hay usuario → mostrar botón login
      if (!usuario) {
        userBox.innerHTML = "";
        btnLogin.style.display = "inline-block";
        return;
      }

      // Ocultar botón Login
      btnLogin.style.display = "none";

      // Foto final
      const fotoFinal =
        usuario.foto && usuario.foto.trim() !== ""
          ? usuario.foto
          : "img/default.png";

      // Visual usuario en navbar
      userBox.innerHTML = `
        <div class="usuario-mini" onclick="location.href='cuenta.html'">
          <img src="${fotoFinal}" alt="Foto del usuario">
          <span>${usuario.nombre}</span>
        </div>
      `;
    });
  </script>

  <!-- Scripts del carrusel -->
  <script src="Scripts/app.js"></script>
  <script src="Scripts/sesion-global.js"></script>

</body>
</html>
