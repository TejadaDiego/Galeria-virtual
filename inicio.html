<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio - Catálogo Virtual</title>

    <style>
        body {
            margin:0;
            font-family: Arial, sans-serif;
            background:#f4f4f4;
        }

        header {
            background:#1e1e2f;
            color:#fff;
            padding:15px 20px;
            display:flex;
            justify-content:space-between;
            align-items:center;
        }

        header .logo {
            font-size:22px;
            font-weight:bold;
        }

        nav a {
            color:#fff;
            margin-left:15px;
            text-decoration:none;
            font-weight:bold;
        }

        nav a:hover {
            text-decoration:underline;
        }

        .user-box {
            display:flex;
            align-items:center;
            gap:10px;
            background:#fff;
            padding:15px;
            margin:20px auto;
            width:95%;
            max-width:450px;
            border-radius:10px;
            box-shadow:0 0 10px rgba(0,0,0,0.1);
        }

        .user-box img {
            width:70px;
            height:70px;
            border-radius:50%;
            object-fit:cover;
            border:3px solid #1e1e2f;
        }

        .logout-btn {
            background:#d9534f;
            color:white;
            border:none;
            padding:10px 18px;
            border-radius:8px;
            cursor:pointer;
            font-size:14px;
            margin-left:auto;
        }

        .logout-btn:hover {
            background:#b52b27;
        }

        .principal-box {
            background:white;
            padding:20px;
            width:95%;
            max-width:900px;
            margin:20px auto;
            border-radius:10px;
            box-shadow:0 0 10px rgba(0,0,0,0.1);
        }

    </style>
</head>
<body>

    <header>
        <div class="logo">Catálogo Virtual</div>
        <nav>
            <a href="inicio.html">Inicio</a>
            <a href="nosotros.html">Nosotros</a>
            <a href="productos.html">Productos</a>
        </nav>
    </header>

    <!-- Usuario Logueado -->
    <div id="userInfo" class="user-box" style="display:none;">
        <img id="userFoto" src="" alt="Foto del usuario">
        <div>
            <h3 id="userNombre" style="margin:0;"></h3>
            <p id="userEmail" style="margin:0;color:#555;font-size:14px;"></p>
        </div>
        <button class="logout-btn" id="logoutBtn">Cerrar sesión</button>
    </div>

    <!-- Contenido principal -->
    <div class="principal-box">
        <h2>Bienvenido a tu Panel</h2>
        <p>Aquí podrás navegar por el catálogo, ver productos, revisar tu perfil y mucho más.</p>
    </div>

    <script>
        // Cargar info del usuario desde sessionStorage
        document.addEventListener("DOMContentLoaded", () => {
            const nombre = sessionStorage.getItem("nombre");
            const foto   = sessionStorage.getItem("foto");
            const email  = sessionStorage.getItem("email");

            if (!nombre) {
                // Si no existe, no está logueado → regresar al login
                window.location.href = "login.html";
                return;
            }

            document.getElementById("userNombre").textContent = nombre;
            document.getElementById("userEmail").textContent = email ?? "";

            document.getElementById("userFoto").src = 
                foto && foto !== "" 
                ? "uploads/" + foto
                : "img/default.png";

            document.getElementById("userInfo").style.display = "flex";
        });

        // Logout
        document.getElementById("logoutBtn").addEventListener("click", async () => {
            let response = await fetch("Php/logout.php");
            sessionStorage.clear();
            window.location.href = "login.html";
        });
    </script>

</body>
</html>
