<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar SesiÃ³n</title>

    <!-- CSS principal -->
    <link rel="stylesheet" href="Estilos/login.css">
</head>

<body>

    <!-- ======================================================== -->
    <!--                     NAVBAR GLOBAL                        -->
    <!-- ======================================================== -->
    <nav class="navbar">
        <h2 class="logo">GalerÃ­a <span>Virtual</span></h2>

        <ul class="navbar-links">
            <li><a href="inicio.html">Inicio</a></li>
            <li><a href="Sobre_nosotros.html">Nosotros</a></li>
            <li><a href="Contenido.html">Contenido</a></li>
            <li><a href="publicar.html">Publicar +</a></li>

            <!-- BotÃ³n login (oculto si hay usuario en localStorage) -->
            <li><a id="btnLoginNav" href="login.html">Iniciar sesiÃ³n</a></li>

            <!-- AquÃ­ se carga foto + nombre -->
            <li id="navbarUserBox" class="usuario-box"></li>
        </ul>
    </nav>



    <!-- ======================================================== -->
    <!--          PANTALLA 1 â†’ SELECCIÃ“N DE TIPO DE LOGIN         -->
    <!-- ======================================================== -->

    <div class="login-card" id="selector-roles">
        <img class="login-logo" src="https://cdn-icons-png.flaticon.com/512/847/847969.png">

        <h2>Â¿CÃ³mo deseas ingresar?</h2>

        <button class="btn-rol btn-comprador" onclick="seleccionarRol('comprador')">
            ğŸ›’ Entrar como Comprador
        </button>

        <button class="btn-rol btn-estudiante" onclick="seleccionarRol('estudiante')">
            ğŸ“š Entrar como Estudiante
        </button>

        <button class="btn-rol btn-admin" onclick="seleccionarRol('admin')">
            ğŸ›¡ï¸ Entrar como Administrador
        </button>
    </div>


    <!-- ======================================================== -->
    <!--                    PANTALLA LOGIN FORM                   -->
    <!-- ======================================================== -->

    <div class="login-card" id="formulario-login" style="display:none;">
        <img class="login-logo" src="https://cdn-icons-png.flaticon.com/512/847/847969.png">

        <h2 id="titulo-login">Acceso al Sistema</h2>

        <form id="loginForm">

            <!-- Campo oculto con el tipo seleccionado -->
            <input type="hidden" id="tipoSeleccionado" name="tipo" value="">

            <div class="input-group">
                <span>ğŸ“§</span>
                <input type="email" name="email" required placeholder="Correo registrado">
            </div>

            <div class="input-group">
                <span>ğŸ”’</span>
                <input type="password" name="password" required placeholder="ContraseÃ±a">
            </div>

            <button class="btn-submit" type="submit">Entrar</button>
        </form>

        <a class="crear-cuenta" href="registro.html">Â¿No tienes cuenta? Crear cuenta</a>

        <p class="volver" onclick="volverRoles()">â¬… Volver</p>

        <p class="error" id="mensajeError" style="display:none;">Credenciales incorrectas</p>
    </div>



    <!-- ======================================================== -->
    <!--                       SCRIPTS                            -->
    <!-- ======================================================== -->

    <script>
        /* ==========================
           Cambio de Pantallas
        ========================== */
        function seleccionarRol(rol) {
            document.getElementById("selector-roles").style.display = "none";
            document.getElementById("formulario-login").style.display = "block";

            document.getElementById("tipoSeleccionado").value = rol;

            const titulo = document.getElementById("titulo-login");

            if (rol === "comprador") titulo.textContent = "Acceso de Comprador ğŸ›’";
            if (rol === "estudiante") titulo.textContent = "Acceso de Estudiante ğŸ“š";
            if (rol === "admin") titulo.textContent = "Acceso de Administrador ğŸ›¡ï¸";
        }

        function volverRoles() {
            document.getElementById("formulario-login").style.display = "none";
            document.getElementById("selector-roles").style.display = "block";
        }
    </script>

    <!-- Script que maneja el LOGIN (fetch â†’ login.php) -->
    <script src="Scripts/login-handler.js"></script>

    <!-- Navbar global: muestra usuario logueado -->
    <script src="Scripts/sesion-global.js"></script>

</body>
</html>
